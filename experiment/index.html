<!DOCTYPE html>
<html>
    <head>
        <!-- Title shown in tab -->
        <title>University of Sussex - Research</title>

         <!-- Load JsPsych -->
        <script src="https://unpkg.com/jspsych@8.2.2"></script>
        <link href="https://unpkg.com/jspsych@8.2.2/css/jspsych.css" rel="stylesheet" type="text/css" />

        <!-- Load plugins -->
        <script src="https://unpkg.com/@jspsych/plugin-browser-check@2.1.0"></script>
        <script src="https://unpkg.com/@jspsych/plugin-preload@2.1.0"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0"></script>
        <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0"></script>
        <script src="https://unpkg.com/@jspsych/plugin-fullscreen@2.1.0"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey@3.0.0"></script>
        <link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@3.0.0/css/survey.css" />

        <!-- To save data via DataPipe (for online experiments) -->
        <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe@0.5.0"></script>

        <!-- Custom scripts -->
        <script src="demographics.js"></script>
        <script src="questionnaires_aftertask.js"></script>
        <script src="questionnaires_beforetask.js"></script>
        <script src="fiction.js"></script>
        
    
      <style></style>
    </head>

    <body></body>

    <script>
        // Initialize experiment =================================================
        var timeline = []

        var jsPsych = initJsPsych({
            show_progress_bar: true,
            on_finish: function () {
                // jsPsych.data.displayData("json") // Display data in browser
                    window.location = "https://realitybending.github.io/" // Redirect to lab website
            },
        })

        // Participant ID
        const participantID = jsPsych.randomization.randomID(10)

        // // full screen
        timeline.push(ConsentForm)

        // // Shuffle -----------------------------------------------------------------
        // qs_beforetask = jsPsych.randomization.shuffleNoRepeats([
        //     questionnaire_loneliness,
        //     questionnaire_somatichealth,
        //     questionnaire_mentalhealth,
        //     questionnaire_phq4,
        //     questionnaire_dejong,
        //     questionnaire_ucla,
        // ])
        // qs_aftertask = jsPsych.randomization.shuffleNoRepeats([
        //     questionnaire_mint,
        //     questionnaire_bait,
        //     questionnaire_iri,
        //     questionnaire_seacs,
        // ])

        // // Start -----------------------------------------------------------------
        // timeline.push(demographics_browser_info)
        // timeline.push(demographic_questions)

        // // Questionnaires - before task
        // timeline.push(qs_beforetask[0])
        // timeline.push(qs_beforetask[1])
        // timeline.push(qs_beforetask[2])
        // timeline.push(qs_beforetask[3])
        // timeline.push(qs_beforetask[4])
        // timeline.push(qs_beforetask[5])

        // // Task

        // // Questionnaires - after task
        // timeline.push(questionnaire_instructions)
        // timeline.push(qs_aftertask[0])
        // timeline.push(qs_aftertask[1])
        // timeline.push(qs_aftertask[2])      
        // timeline.push(qs_aftertask[3])    

        // // // End
        // timeline.push(experiment_feedback)
        // timeline.push(demographics_debriefing)

        // // save data via DataPipe
        // // timeline.push({
        // //     type: jsPsychPipe,
        // //     action: "save",
        // //     experiment_id: "IVMu1TevBRi6", // This in generated in the DataPipe interface
        // //     filename: `${participantID}.csv`,
        // //     data_string: () => jsPsych.data.get().csv(),
        // // })

        // timeline.push(demographics_endscreen)

        timeline.push(social_preload)
        timeline.push(social_instructions1)
        timeline.push(social_phase1)
        timeline.push(social_bluff_intro)
        timeline.push(social_phase2)
        timeline.push(social_admit_bluff)
        timeline.push(social_likelihood_trivial)
        timeline.push(social_likelihood_mental)
        timeline.push(social_likelihood_romantic)

        // /* ----------------- Run the timeline ----------------- */
        jsPsych.run(timeline)


    </script>
</html>
